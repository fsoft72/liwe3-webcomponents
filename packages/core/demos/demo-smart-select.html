<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>SmartSelect Demo</title>
		<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		body {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
			background: #f5f5f5;
			min-height: 150vh; /* Make page scrollable for corner tests */
		}
		.section {
			background: white;
			padding: 20px;
			border-radius: 8px;
			margin-bottom: 20px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}
		h2 {
			margin-top: 0;
		}
		.log-container {
			background: #333;
			color: #fff;
			padding: 10px;
			border-radius: 4px;
			height: 150px;
			overflow-y: auto;
			font-family: monospace;
			font-size: 12px;
		}
		.log-entry {
			margin-bottom: 4px;
			border-bottom: 1px solid #444;
			padding-bottom: 2px;
		}
		/* Corner test positioning */
		.corner-tests {
			position: relative;
			margin-top: 40px;
			padding: 20px;
			background: #e0e0e0;
			border-radius: 8px;
			min-height: 300px;
		}
		.corner-tests h2 {
			text-align: center;
			margin-bottom: 20px;
		}
		.corner-position {
			position: absolute;
			width: 220px;
		}
		.corner-position.top-left {
			top: 60px;
			left: 20px;
		}
		.corner-position.top-right {
			top: 60px;
			right: 20px;
		}
		.corner-position.bottom-left {
			bottom: 20px;
			left: 20px;
		}
		.corner-position.bottom-right {
			bottom: 20px;
			right: 20px;
		}
		.corner-label {
			font-size: 12px;
			color: #666;
			margin-bottom: 4px;
		}
		/* Bottom of page test */
		.bottom-test {
			margin-top: 100px;
			padding: 20px;
			background: #fff3cd;
			border-radius: 8px;
		}
		</style>
		<link rel="stylesheet" href="../demos/theme/variables.css" />
		<link rel="stylesheet" href="../demos/theme/theme.css" />
		<link rel="stylesheet" href="../demos/theme/typography.css" />
		<link rel="stylesheet" href="../demos/theme/layout.css" />
		<link rel="stylesheet" href="../demos/theme/form.css" />
	</head>
	<body>
		<h1>SmartSelect Demo</h1>

		<div class="section">
			<h2>Multiple Select with Tags</h2>
			<liwe3-select id="tagSelect" multiple searchable placeholder="Select a tag..."></liwe3-select>
		</div>

		<div class="section">
			<h2>Single Select with Images</h2>
			<liwe3-select id="singleSelect" placeholder="Select a user..."></liwe3-select>
		</div>

		<div class="section">
			<h2>Multi Select with Images & Search</h2>
			<liwe3-select id="multiSelect" multiple searchable placeholder="Select team members..."></liwe3-select>
		</div>

		<div class="section">
			<h2>Event Log</h2>
			<div id="eventLog" class="log-container"></div>
		</div>

		<div class="section corner-tests">
			<h2>Corner Position Tests</h2>
			<p style="text-align: center; color: #666">Test dropdown positioning at viewport edges</p>

			<div class="corner-position top-left">
				<div class="corner-label">Top Left</div>
				<liwe3-select id="cornerTopLeft" searchable placeholder="Search here..."></liwe3-select>
			</div>

			<div class="corner-position top-right">
				<div class="corner-label">Top Right</div>
				<liwe3-select id="cornerTopRight" searchable placeholder="Search here..."></liwe3-select>
			</div>

			<div class="corner-position bottom-left">
				<div class="corner-label">Bottom Left</div>
				<liwe3-select id="cornerBottomLeft" searchable placeholder="Search here..."></liwe3-select>
			</div>

			<div class="corner-position bottom-right">
				<div class="corner-label">Bottom Right</div>
				<liwe3-select id="cornerBottomRight" searchable placeholder="Search here..."></liwe3-select>
			</div>
		</div>

		<div class="section bottom-test">
			<h2>⚠️ Bottom of Page Test (Scroll Down)</h2>
			<p>This select is positioned at the bottom of the page. The dropdown should open <strong>upward</strong> and stay visible while typing in the search box.</p>
			<liwe3-select id="bottomPageSelect" searchable multiple placeholder="Type to search (dropdown should open upward)..."></liwe3-select>
		</div>

		<script type="module">
		import { defineSmartSelect } from '../dist/SmartSelect.js';

		const users = [
			{ value: '1', label: 'Alice Johnson', image: 'https://i.pravatar.cc/150?u=1' },
			{ value: '2', label: 'Bob Smith', image: 'https://i.pravatar.cc/150?u=2' },
			{ value: '3', label: 'Charlie Brown', image: 'https://i.pravatar.cc/150?u=3' },
			{ value: '4', label: 'Diana Prince', image: 'https://i.pravatar.cc/150?u=4' },
			{ value: '5', label: 'Evan Wright', image: 'https://i.pravatar.cc/150?u=5' },
		];

		const tags = [
			{ value: 'tag1', label: 'Tag One' },
			{ value: 'tag2', label: 'Tag Two' },
			{ value: 'tag3', label: 'Tag Three' },
			{ value: 'tag4', label: 'Tag Four' },
			{ value: 'tag5', label: 'Tag Five' },
		];

		const tagsSelect = document.getElementById( 'singleSelect' );
		tagsSelect.options = tags;
		tagsSelect.addEventListener( 'change', ( e ) => log( `Single Select Change: ${e.detail.value}` ) );

		const singleSelect = document.getElementById( 'singleSelect' );
		singleSelect.options = users;
		singleSelect.addEventListener( 'change', ( e ) => log( `Single Select Change: ${e.detail.value}` ) );

		const multiSelect = document.getElementById( 'tagSelect' );
		multiSelect.options = tags;
		multiSelect.addEventListener( 'change', ( e ) => log( `Multi Select Tags Change: ${JSON.stringify( e.detail.value )}` ) );
		multiSelect.addEventListener( 'search', ( e ) => log( `Tags Search: ${e.detail.query}` ) );

		// Extended options for corner tests
		const extendedOptions = [
			{ value: '1', label: 'Apple' },
			{ value: '2', label: 'Banana' },
			{ value: '3', label: 'Cherry' },
			{ value: '4', label: 'Date' },
			{ value: '5', label: 'Elderberry' },
			{ value: '6', label: 'Fig' },
			{ value: '7', label: 'Grape' },
			{ value: '8', label: 'Honeydew' },
			{ value: '9', label: 'Imbe' },
			{ value: '10', label: 'Jackfruit' },
			{ value: '11', label: 'Kiwi' },
			{ value: '12', label: 'Lemon' },
		];

		// Setup corner position selects
		const cornerIds = [ 'cornerTopLeft', 'cornerTopRight', 'cornerBottomLeft', 'cornerBottomRight', 'bottomPageSelect' ];
		cornerIds.forEach( (id) => {
			const el = document.getElementById( id );
			if ( el ) {
				el.options = extendedOptions;
				el.addEventListener( 'change', ( e ) => log( `${id} Change: ${JSON.stringify( e.detail.value )}` ) );
				el.addEventListener( 'search', ( e ) => log( `${id} Search: "${e.detail.query}"` ) );
			}
		} );

		function log( msg ) {
			const logEl = document.getElementById( 'eventLog' );
			const entry = document.createElement( 'div' );
			entry.className = 'log-entry';
			entry.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
			logEl.prepend( entry );
		}
		</script>
	</body>
</html>
