{"version":3,"file":"Drawer.js","sources":["../src/Drawer.ts"],"sourcesContent":["/**\n * Drawer Web Component\n * A container that can be expanded, shrunk, or closed with smooth animations\n */\n\nexport type DrawerDirection = 'horizontal' | 'vertical';\nexport type DrawerState = 'expanded' | 'shrunk' | 'closed';\n\nexport interface DrawerConfig {\n  direction?: DrawerDirection;\n  duration?: number;\n  showTitleWhenShrunk?: boolean;\n  closable?: boolean;\n  title?: string;\n  icon?: string;\n  showToggleButton?: boolean;\n  contentPadding?: string;\n}\n\nexport class DrawerElement extends HTMLElement {\n  declare shadowRoot: ShadowRoot;\n  private currentState: DrawerState = 'expanded';\n  private config: DrawerConfig = {\n    direction: 'horizontal',\n    duration: 300,\n    showTitleWhenShrunk: false,\n    closable: true,\n    title: '',\n    icon: '☰',\n    showToggleButton: true,\n    contentPadding: '16px'\n  };\n\n  constructor () {\n    super();\n    this.attachShadow( { mode: 'open' } );\n    this.render();\n    this.bindEvents();\n  }\n\n  static get observedAttributes (): string[] {\n    return [ 'direction', 'duration', 'show-title-when-shrunk', 'closable', 'title', 'icon', 'state', 'show-toggle-button', 'content-padding' ];\n  }\n\n  attributeChangedCallback ( name: string, oldValue: string | null, newValue: string | null ): void {\n    if ( oldValue !== newValue ) {\n      switch ( name ) {\n        case 'direction':\n          this.config.direction = ( newValue as DrawerDirection ) || 'horizontal';\n          break;\n        case 'duration':\n          this.config.duration = parseInt( newValue || '300', 10 );\n          break;\n        case 'show-title-when-shrunk':\n          this.config.showTitleWhenShrunk = newValue === 'true';\n          break;\n        case 'closable':\n          this.config.closable = newValue !== 'false';\n          break;\n        case 'title':\n          this.config.title = newValue || '';\n          break;\n        case 'icon':\n          this.config.icon = newValue || '☰';\n          break;\n        case 'state':\n          this.currentState = ( newValue as DrawerState ) || 'expanded';\n          break;\n        case 'show-toggle-button':\n          this.config.showToggleButton = newValue !== 'false';\n          break;\n        case 'content-padding':\n          this.config.contentPadding = newValue ?? undefined;\n          break;\n      }\n      this.render();\n    }\n  }\n\n  get direction (): DrawerDirection {\n    return this.config.direction!;\n  }\n\n  set direction ( value: DrawerDirection ) {\n    this.config.direction = value;\n    this.setAttribute( 'direction', value );\n  }\n\n  get duration (): number {\n    return this.config.duration!;\n  }\n\n  set duration ( value: number ) {\n    this.config.duration = value;\n    this.setAttribute( 'duration', value.toString() );\n  }\n\n  get showTitleWhenShrunk (): boolean {\n    return this.config.showTitleWhenShrunk!;\n  }\n\n  set showTitleWhenShrunk ( value: boolean ) {\n    this.config.showTitleWhenShrunk = value;\n    this.setAttribute( 'show-title-when-shrunk', value.toString() );\n  }\n\n  get closable (): boolean {\n    return this.config.closable!;\n  }\n\n  set closable ( value: boolean ) {\n    this.config.closable = value;\n    this.setAttribute( 'closable', value.toString() );\n  }\n\n  get title (): string {\n    return this.config.title!;\n  }\n\n  set title ( value: string ) {\n    this.config.title = value;\n    this.setAttribute( 'title', value );\n  }\n\n  get icon (): string {\n    return this.config.icon!;\n  }\n\n  set icon ( value: string ) {\n    this.config.icon = value;\n    this.setAttribute( 'icon', value );\n  }\n\n  get showToggleButton (): boolean {\n    return this.config.showToggleButton!;\n  }\n\n  set showToggleButton ( value: boolean ) {\n    this.config.showToggleButton = value;\n    this.setAttribute( 'show-toggle-button', value.toString() );\n  }\n\n  get contentPadding (): string {\n    return this.config.contentPadding ?? '16px';\n  }\n\n  set contentPadding ( value: string ) {\n    this.config.contentPadding = value;\n    this.setAttribute( 'content-padding', value );\n  }\n\n  get state (): DrawerState {\n    return this.currentState;\n  }\n\n  set state ( value: DrawerState ) {\n    this.setState( value );\n  }\n\n  /**\n   * Expand the drawer\n   */\n  expand (): void {\n    this.setState( 'expanded' );\n  }\n\n  /**\n   * Shrink the drawer\n   */\n  shrink (): void {\n    this.setState( 'shrunk' );\n  }\n\n  /**\n   * Close the drawer (removes from DOM)\n   */\n  close (): void {\n    this.setState( 'closed' );\n  }\n\n  /**\n   * Toggle between expanded and shrunk states\n   */\n  toggle (): void {\n    if ( this.currentState === 'expanded' ) {\n      this.shrink();\n    } else if ( this.currentState === 'shrunk' ) {\n      this.expand();\n    }\n  }\n\n  private setState ( newState: DrawerState ): void {\n    const oldState = this.currentState;\n    this.currentState = newState;\n    this.setAttribute( 'state', newState );\n\n    const container = this.shadowRoot.querySelector( '.drawer-container' ) as HTMLElement;\n    if ( !container ) return;\n\n    // Dispatch state change event\n    this.dispatchEvent( new CustomEvent( 'drawer-state-change', {\n      detail: { oldState, newState },\n      bubbles: true,\n      composed: true\n    } ) );\n\n    if ( newState === 'closed' ) {\n      // Immediately remove from DOM (no animation) without visual jump\n      container.style.display = 'none';\n      this.dispatchEvent( new CustomEvent( 'drawer-closed', { bubbles: true, composed: true } ) );\n      this.remove();\n      return;\n    }\n\n    if ( newState === 'shrunk' ) {\n      container.style.display = 'block';\n      container.classList.add( 'shrunk' );\n      container.classList.remove( 'expanded' );\n      this.dispatchEvent( new CustomEvent( 'drawer-shrunk', { bubbles: true, composed: true } ) );\n      return;\n    }\n\n    if ( newState === 'expanded' ) {\n      container.style.display = 'block';\n      container.classList.remove( 'shrunk' );\n      container.classList.add( 'expanded' );\n      this.dispatchEvent( new CustomEvent( 'drawer-expanded', { bubbles: true, composed: true } ) );\n      return;\n    }\n  }\n\n  private bindEvents (): void {\n    this.shadowRoot.addEventListener( 'click', ( e ) => {\n      const target = e.target as HTMLElement;\n\n      if ( target.closest( '.drawer-toggle' ) ) {\n        e.preventDefault();\n        this.toggle();\n      }\n\n      if ( target.closest( '.drawer-close' ) && this.config.closable ) {\n        e.preventDefault();\n        this.close();\n      }\n    } );\n  }\n\n  private render (): void {\n    const isHorizontal = this.config.direction === 'horizontal';\n    const showTitle = this.config.showTitleWhenShrunk;\n    const showToggleButton = this.config.showToggleButton !== false;\n    const contentPadding = this.config.contentPadding ?? '16px';\n\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          --drawer-duration: ${ this.config.duration }ms;\n          --drawer-bg: #ffffff;\n          --drawer-border: #e5e7eb;\n          --drawer-text: #1f2937;\n          --drawer-icon-bg: #f3f4f6;\n          --drawer-icon-hover: #e5e7eb;\n          --drawer-button-hover: #f9fafb;\n          --drawer-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        /* Container when expanded */\n        .drawer-container {\n          background: var(--drawer-bg);\n          border: 1px solid var(--drawer-border);\n          border-radius: 8px;\n          box-shadow: var(--drawer-shadow);\n          overflow: hidden;\n          position: relative;\n        }\n\n        .drawer-container.horizontal {\n          width: var(--drawer-horizontal-size, 300px);\n          height: auto;\n          transition: none;\n        }\n\n        .drawer-container.vertical {\n          width: auto;\n          height: var(--drawer-vertical-size, 300px);\n          transition: none;\n        }\n\n        .drawer-container.expanded {\n          opacity: 1;\n        }\n\n        .drawer-container.shrunk.horizontal {\n          width: var(--drawer-horizontal-shrunk-size, 48px);\n        }\n\n        .drawer-container.shrunk.vertical {\n          height: var(--drawer-vertical-shrunk-size, 48px);\n        }\n\n        /* Header area with title and buttons */\n        .drawer-header {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 12px;\n          border-bottom: 1px solid var(--drawer-border);\n          transition: none;\n        }\n\n        .drawer-container.shrunk .drawer-header {\n          border-bottom: none;\n        }\n\n        .drawer-container.shrunk .drawer-title:not(.keep-visible),\n        .drawer-container.shrunk .drawer-close {\n          display: none;\n        }\n\n        .drawer-container.shrunk .drawer-title.keep-visible {\n          display: block;\n        }\n\n        .drawer-toggle {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 28px;\n          height: 28px;\n          background: var(--drawer-icon-bg);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 16px;\n          transition: background 0.2s;\n          flex-shrink: 0;\n        }\n\n        .drawer-toggle:hover {\n          background: var(--drawer-icon-hover);\n        }\n\n        .drawer-title {\n          flex: 1;\n          font-size: 16px;\n          font-weight: 600;\n          color: var(--drawer-text);\n          transition: none;\n          white-space: nowrap;\n          overflow: hidden;\n        }\n\n        .drawer-close {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 24px;\n          height: 24px;\n          background: transparent;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 18px;\n          color: #6b7280;\n          transition: none;\n          flex-shrink: 0;\n        }\n\n        .drawer-close:hover {\n          background: var(--drawer-button-hover);\n          color: #ef4444;\n        }\n\n        /* Content area */\n        .drawer-content {\n          padding: var(--drawer-content-padding, 16px);\n          transition: none;\n          overflow: auto;\n        }\n\n        .drawer-container.shrunk .drawer-content {\n          opacity: 0;\n          height: 0;\n          padding: 0;\n          overflow: hidden;\n          position: absolute;\n          z-index: -1;\n        }\n\n        /* Vertical specific styles */\n        .drawer-container.vertical {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .drawer-container.vertical .drawer-content {\n          flex: 1;\n          overflow: auto;\n        }\n      </style>\n\n      <div class=\"drawer-container ${ isHorizontal ? 'horizontal' : 'vertical' } ${ this.currentState }\" style=\"display:block; --drawer-content-padding:${ contentPadding };\">\n        <div class=\"drawer-header\">\n          ${ showToggleButton ? `\n          <button class=\"drawer-toggle\" aria-label=\"Toggle drawer\">\n            ${ this.config.icon }\n          </button>\n          ` : '' }\n          <div class=\"drawer-title ${ showTitle ? 'keep-visible' : '' }\">\n            ${ this.config.title }\n          </div>\n          ${ this.config.closable ? `\n            <button class=\\\"drawer-close\\\" aria-label=\\\"Close drawer\\\">\\n              ×\\n            </button>\n          ` : '' }\n        </div>\n        <div class=\"drawer-content\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n}\n\n// Auto-register the custom element\nif ( !customElements.get( 'liwe3-drawer' ) ) {\n  customElements.define( 'liwe3-drawer', DrawerElement );\n}\n\n// Export a function to manually register with a custom tag name\nexport function defineDrawer ( tagName: string = 'liwe3-drawer' ): void {\n  if ( !customElements.get( tagName ) ) {\n    customElements.define( tagName, DrawerElement );\n  }\n}\n"],"names":["DrawerElement","name","oldValue","newValue","value","newState","oldState","container","e","target","isHorizontal","showTitle","showToggleButton","contentPadding","defineDrawer","tagName"],"mappings":"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"}