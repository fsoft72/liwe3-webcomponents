{"version":3,"file":"ContainerBox.js","sources":["../src/ContainerBox.ts"],"sourcesContent":["/**\n * ContainerBox Web Component\n * A container that wraps elements and shows a menu on hover\n */\n\nimport type { PopoverMenuItem } from './PopoverMenu';\n\nexport type MenuPosition = 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n\nexport type ContainerBoxConfig = {\n  menuPosition?: MenuPosition;\n  menuItems?: PopoverMenuItem[];\n  alwaysShowMenu?: boolean;\n};\n\nexport class ContainerBoxElement extends HTMLElement {\n  declare shadowRoot: ShadowRoot;\n  private menuPosition: MenuPosition = 'bottom-left';\n  private menuItems: PopoverMenuItem[] = [];\n  private alwaysShowMenu: boolean = false;\n  private popoverMenu: HTMLElement | null = null;\n  private menuButton: HTMLElement | null = null;\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback(): void {\n    this.render();\n    this.setupEventListeners();\n  }\n\n  disconnectedCallback(): void {\n    this.cleanupEventListeners();\n  }\n\n  /**\n   * Set menu position\n   */\n  setMenuPosition(position: MenuPosition): void {\n    this.menuPosition = position;\n    this.updateMenuButtonPosition();\n  }\n\n  /**\n   * Get menu position\n   */\n  getMenuPosition(): MenuPosition {\n    return this.menuPosition;\n  }\n\n  /**\n   * Set menu items\n   */\n  setMenuItems(items: PopoverMenuItem[]): void {\n    this.menuItems = items;\n    this.updatePopoverMenu();\n  }\n\n  /**\n   * Get menu items\n   */\n  getMenuItems(): PopoverMenuItem[] {\n    return this.menuItems;\n  }\n\n  /**\n   * Set whether menu button is always visible\n   */\n  setAlwaysShowMenu(value: boolean): void {\n    this.alwaysShowMenu = value;\n    this.updateMenuButtonVisibility();\n  }\n\n  /**\n   * Get whether menu button is always visible\n   */\n  getAlwaysShowMenu(): boolean {\n    return this.alwaysShowMenu;\n  }\n\n  /**\n   * Render the component\n   */\n  private render(): void {\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          position: relative;\n          font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .container-box {\n          position: relative;\n          width: 100%;\n          height: 100%;\n        }\n\n        .content-wrapper {\n          width: 100%;\n          height: 100%;\n        }\n\n        .menu-button {\n          position: absolute;\n          background: var(--container-box-menu-bg, #fff);\n          border: 1px solid var(--container-box-menu-border, #ddd);\n          border-radius: var(--container-box-menu-radius, 4px);\n          padding: var(--container-box-menu-padding, 6px 10px);\n          cursor: pointer;\n          box-shadow: var(--container-box-menu-shadow, 0 2px 8px rgba(0,0,0,0.15));\n          z-index: 10;\n          opacity: 0;\n          transition: opacity 0.2s;\n          display: flex;\n          align-items: center;\n          gap: 4px;\n          font-size: 14px;\n          color: var(--container-box-menu-color, #333);\n        }\n\n        .menu-button:hover {\n          background: var(--container-box-menu-hover-bg, #f5f5f5);\n        }\n\n        .container-box:hover .menu-button {\n          opacity: 1;\n        }\n\n        .menu-button.always-visible {\n          opacity: 1;\n        }\n\n        .menu-button-icon {\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        /* Position variants */\n        .menu-button.top-left {\n          top: var(--container-box-menu-offset, 8px);\n          left: var(--container-box-menu-offset, 8px);\n        }\n\n        .menu-button.top-right {\n          top: var(--container-box-menu-offset, 8px);\n          right: var(--container-box-menu-offset, 8px);\n        }\n\n        .menu-button.bottom-left {\n          bottom: var(--container-box-menu-offset, 8px);\n          left: var(--container-box-menu-offset, 8px);\n        }\n\n        .menu-button.bottom-right {\n          bottom: var(--container-box-menu-offset, 8px);\n          right: var(--container-box-menu-offset, 8px);\n        }\n\n        .popover-container {\n          position: fixed;\n          z-index: 10000;\n          pointer-events: none;\n        }\n\n        .popover-container > * {\n          pointer-events: auto;\n        }\n      </style>\n\n      <div class=\"container-box\">\n        <div class=\"content-wrapper\">\n          <slot></slot>\n        </div>\n        <div class=\"menu-button ${this.menuPosition} ${this.alwaysShowMenu ? 'always-visible' : ''}\">\n          <span class=\"menu-button-icon\">⋮</span>\n        </div>\n      </div>\n      <div class=\"popover-container\"></div>\n    `;\n\n    this.menuButton = this.shadowRoot.querySelector('.menu-button');\n    this.createPopoverMenu();\n  }\n\n  /**\n   * Create the popover menu\n   */\n  private createPopoverMenu(): void {\n    // We'll create the popover dynamically when needed\n  }\n\n  /**\n   * Update popover menu items\n   */\n  private updatePopoverMenu(): void {\n    // Menu items are stored and used when showing the menu\n  }\n\n  /**\n   * Render menu items recursively\n   */\n  private renderMenuItems(items: PopoverMenuItem[]): string {\n    return items.map(item => {\n      if (item.label === '---sep') {\n        return '<div class=\"menu-separator\"></div>';\n      }\n\n      const hasSubmenu = item.items && item.items.length > 0;\n      const isDisabled = item.enabled === false;\n      const disabledClass = isDisabled ? 'disabled' : '';\n      const submenuClass = hasSubmenu ? 'has-submenu' : '';\n\n      return `\n        <div class=\"menu-item ${disabledClass} ${submenuClass}\" data-has-submenu=\"${hasSubmenu}\">\n          <span class=\"menu-item-label\">${item.label}</span>\n          ${hasSubmenu ? '<span class=\"menu-item-arrow\">▶</span>' : ''}\n          ${hasSubmenu ? `<div class=\"submenu\">${this.renderMenuItems(item.items!)}</div>` : ''}\n        </div>\n      `;\n    }).join('');\n  }\n\n  /**\n   * Create and show the popover menu\n   */\n  private createAndShowPopover(): HTMLElement {\n    const popover = document.createElement('div');\n    popover.className = 'custom-popover-menu';\n    popover.innerHTML = `\n      <style>\n        .custom-popover-menu {\n          position: fixed;\n          background: white;\n          border: 1px solid #ccc;\n          border-radius: 6px;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          min-width: 180px;\n          z-index: 10000;\n        }\n\n        .menu-item {\n          padding: 10px 16px;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          transition: background-color 0.2s;\n          position: relative;\n          font-size: 14px;\n          color: #333;\n        }\n\n        .menu-item:hover {\n          background: #f5f5f5;\n        }\n\n        .menu-item.disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n          pointer-events: none;\n        }\n\n        .menu-item.has-submenu:hover .submenu {\n          display: block;\n        }\n\n        .menu-item-label {\n          flex: 1;\n        }\n\n        .menu-item-arrow {\n          margin-left: 12px;\n          font-size: 10px;\n          color: #666;\n        }\n\n        .menu-separator {\n          height: 1px;\n          background: #e0e0e0;\n          margin: 4px 8px;\n        }\n\n        .submenu {\n          display: none;\n          position: fixed;\n          background: white;\n          border: 1px solid #ccc;\n          border-radius: 6px;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          min-width: 180px;\n          z-index: 10001;\n        }\n      </style>\n      ${this.renderMenuItems(this.menuItems)}\n    `;\n\n    return popover;\n  }\n\n  /**\n   * Attach event listeners to menu items\n   */\n  private attachMenuListeners(popover: HTMLElement, items: PopoverMenuItem[]): void {\n    const menuItems = popover.querySelectorAll('.menu-item:not(.has-submenu)');\n    \n    menuItems.forEach((element, index) => {\n      let flatIndex = 0;\n      const findItem = (items: PopoverMenuItem[]): PopoverMenuItem | null => {\n        for (const item of items) {\n          if (item.label === '---sep') continue;\n          if (!(item.items && item.items.length > 0)) {\n            if (flatIndex === index) return item;\n            flatIndex++;\n          }\n        }\n        return null;\n      };\n\n      const item = findItem(items);\n      if (item && item.onclick) {\n        element.addEventListener('click', (e) => {\n          e.stopPropagation();\n          item.onclick!();\n          this.hideMenu();\n        });\n      }\n    });\n\n    // Handle submenu positioning within container boundaries\n    const containerRect = this.getBoundingClientRect();\n    const submenuItems = popover.querySelectorAll('.menu-item.has-submenu');\n    \n    submenuItems.forEach(element => {\n      element.addEventListener('mouseenter', () => {\n        const submenu = element.querySelector('.submenu') as HTMLElement;\n        if (submenu) {\n          const rect = element.getBoundingClientRect();\n          const submenuRect = submenu.getBoundingClientRect();\n          \n          let left = rect.right + 5;\n          let top = rect.top;\n          \n          // Check if submenu would overflow container on the right\n          if (left + submenuRect.width > containerRect.right) {\n            // Try positioning to the left of the parent item\n            left = rect.left - submenuRect.width - 5;\n            \n            // If still overflowing left, position at container left edge\n            if (left < containerRect.left) {\n              left = containerRect.left;\n            }\n          }\n          \n          // Check if submenu would overflow container at the bottom\n          if (top + submenuRect.height > containerRect.bottom) {\n            // Align bottom of submenu with bottom of container\n            top = containerRect.bottom - submenuRect.height;\n            \n            // If still overflowing at top, position at container top\n            if (top < containerRect.top) {\n              top = containerRect.top;\n            }\n          }\n          \n          submenu.style.left = `${left}px`;\n          submenu.style.top = `${top}px`;\n        }\n      });\n    });\n  }\n\n  /**\n   * Update menu button position\n   */\n  private updateMenuButtonPosition(): void {\n    if (!this.menuButton) return;\n\n    this.menuButton.className = `menu-button ${this.menuPosition} ${this.alwaysShowMenu ? 'always-visible' : ''}`;\n  }\n\n  /**\n   * Update menu button visibility\n   */\n  private updateMenuButtonVisibility(): void {\n    if (!this.menuButton) return;\n\n    if (this.alwaysShowMenu) {\n      this.menuButton.classList.add('always-visible');\n    } else {\n      this.menuButton.classList.remove('always-visible');\n    }\n  }\n\n  /**\n   * Setup event listeners\n   */\n  private setupEventListeners(): void {\n    if (this.menuButton) {\n      this.menuButton.addEventListener('click', this.handleMenuButtonClick.bind(this));\n    }\n\n    // Allow clicks to pass through to slotted content\n    const contentWrapper = this.shadowRoot.querySelector('.content-wrapper');\n    if (contentWrapper) {\n      contentWrapper.addEventListener('click', this.handleContentClick.bind(this));\n    }\n  }\n\n  /**\n   * Cleanup event listeners\n   */\n  private cleanupEventListeners(): void {\n    if (this.menuButton) {\n      this.menuButton.removeEventListener('click', this.handleMenuButtonClick.bind(this));\n    }\n\n    const contentWrapper = this.shadowRoot.querySelector('.content-wrapper');\n    if (contentWrapper) {\n      contentWrapper.removeEventListener('click', this.handleContentClick.bind(this));\n    }\n  }\n\n  /**\n   * Handle menu button click\n   */\n  private handleMenuButtonClick(e: Event): void {\n    e.stopPropagation();\n\n    if (!this.menuButton) return;\n\n    // Toggle menu visibility\n    if (this.popoverMenu) {\n      this.hideMenu();\n    } else {\n      this.showMenu();\n    }\n  }\n\n  /**\n   * Show the menu\n   */\n  private showMenu(): void {\n    if (!this.menuButton || this.menuItems.length === 0) return;\n\n    // Create the popover\n    if (this.popoverMenu) {\n      this.popoverMenu.remove();\n    }\n\n    this.popoverMenu = this.createAndShowPopover() as any;\n    document.body.appendChild(this.popoverMenu as any);\n\n    // Get button and container bounds\n    const buttonRect = this.menuButton.getBoundingClientRect();\n    const containerRect = this.getBoundingClientRect();\n    \n    // Temporarily position to measure\n    (this.popoverMenu as any).style.left = `${buttonRect.left}px`;\n    (this.popoverMenu as any).style.top = `${buttonRect.bottom + 4}px`;\n    \n    // Wait for next frame to get accurate measurements\n    requestAnimationFrame(() => {\n      const menuRect = (this.popoverMenu as any).getBoundingClientRect();\n      \n      let left = buttonRect.left;\n      let top = buttonRect.bottom + 4;\n      \n      // Check if menu would overflow container on the right\n      if (left + menuRect.width > containerRect.right) {\n        // Try to align right edge of menu with right edge of container\n        left = containerRect.right - menuRect.width;\n        \n        // If still overflowing left, align with left edge of container\n        if (left < containerRect.left) {\n          left = containerRect.left;\n        }\n      }\n      \n      // Check if menu would overflow container on the left\n      if (left < containerRect.left) {\n        left = containerRect.left;\n      }\n      \n      // Check if menu would overflow container at the bottom\n      if (top + menuRect.height > containerRect.bottom) {\n        // Try positioning above the button\n        top = buttonRect.top - menuRect.height - 4;\n        \n        // If still overflowing at top, position at container top\n        if (top < containerRect.top) {\n          top = containerRect.top;\n        }\n      }\n      \n      // Check if menu would overflow container at the top\n      if (top < containerRect.top) {\n        top = containerRect.top;\n      }\n      \n      // Apply final position\n      (this.popoverMenu as any).style.left = `${left}px`;\n      (this.popoverMenu as any).style.top = `${top}px`;\n    });\n\n    // Attach event listeners\n    this.attachMenuListeners(this.popoverMenu as any, this.menuItems);\n\n    // Add click listener to close menu when clicking outside\n    setTimeout(() => {\n      document.addEventListener('click', this.handleDocumentClick.bind(this), { once: true });\n    }, 0);\n  }\n\n  /**\n   * Hide the menu\n   */\n  private hideMenu(): void {\n    if (this.popoverMenu) {\n      (this.popoverMenu as any).remove();\n      this.popoverMenu = null;\n    }\n  }\n\n  /**\n   * Handle document click to close menu\n   */\n  private handleDocumentClick(e: Event): void {\n    const target = e.target as Node;\n    const popoverElement = this.popoverMenu as any;\n    if (popoverElement && !popoverElement.contains(target) && !this.menuButton?.contains(target)) {\n      this.hideMenu();\n    }\n  }\n\n  /**\n   * Handle content click - pass through to slotted elements\n   */\n  private handleContentClick(e: Event): void {\n    // Get the slotted elements\n    const slot = this.shadowRoot.querySelector('slot');\n    if (!slot) return;\n\n    const assignedElements = slot.assignedElements();\n    if (assignedElements.length === 0) return;\n\n    // The click naturally propagates to slotted content\n    // We just need to ensure it doesn't trigger the menu\n    e.stopPropagation();\n  }\n}\n\n/**\n * Conditionally defines the custom element if in a browser environment.\n */\nconst defineContainerBox = (tagName = 'liwe3-container-box'): void => {\n  if (typeof window !== 'undefined' && !window.customElements.get(tagName)) {\n    customElements.define(tagName, ContainerBoxElement);\n  }\n};\n\n// Auto-register with default tag name\ndefineContainerBox();\n\nexport { defineContainerBox };\n"],"names":["ContainerBoxElement","position","items","value","item","hasSubmenu","popover","element","index","flatIndex","e","containerRect","submenu","rect","submenuRect","left","top","contentWrapper","buttonRect","menuRect","target","popoverElement","slot","defineContainerBox","tagName"],"mappings":"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"}