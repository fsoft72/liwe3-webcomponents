{"version":3,"file":"ImageView.js","sources":["../src/ImageView.ts"],"sourcesContent":["export type ImageMode = 'stretch' | '1:1' | 'cover' | 'contain';\nexport type ImagePosition = 'center' | 'top' | 'bottom' | 'left' | 'right' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\nexport type ImageFX = 'none' | 'bokeh' | 'pan-left' | 'pan-right' | 'zoom-in' | 'zoom-out';\n\nexport class ImageView extends HTMLElement {\n\tprivate _src: string = '';\n\tprivate _width: string = '100%';\n\tprivate _height: string = 'auto';\n\tprivate _mode: ImageMode = 'cover';\n\tprivate _position: ImagePosition = 'center';\n\tprivate _fx: ImageFX = 'none';\n\tprivate _fxHover: ImageFX = 'none';\n\tprivate _alt: string = '';\n\tprivate _isHovering: boolean = false;\n\n\tprivate container: HTMLDivElement;\n\tprivate img: HTMLImageElement;\n\n\tconstructor () {\n\t\tsuper();\n\t\tthis.attachShadow( { mode: 'open' } );\n\n\t\tconst style = document.createElement( 'style' );\n\t\tstyle.textContent = `\n            :host {\n                display: block;\n                overflow: hidden;\n                position: relative;\n            }\n\n            .container {\n                width: 100%;\n                height: 100%;\n                overflow: hidden;\n                position: relative;\n                display: flex;\n            }\n\n            img {\n                display: block;\n                transition: transform 0.5s ease, filter 0.5s ease;\n            }\n\n            /* Modes */\n            .mode-stretch img {\n                width: 100%;\n                height: 100%;\n                object-fit: fill;\n            }\n\n            .mode-cover img {\n                width: 100%;\n                height: 100%;\n                object-fit: cover;\n            }\n\n            .mode-contain img {\n                width: 100%;\n                height: 100%;\n                object-fit: contain;\n            }\n\n            .mode-1-1 img {\n                max-width: none;\n                max-height: none;\n                /* Default to auto, controlled by position */\n            }\n\n            /* Positions for 1:1 and others if applicable */\n            .pos-center { justify-content: center; align-items: center; }\n            .pos-top { justify-content: center; align-items: flex-start; }\n            .pos-bottom { justify-content: center; align-items: flex-end; }\n            .pos-left { justify-content: flex-start; align-items: center; }\n            .pos-right { justify-content: flex-end; align-items: center; }\n            .pos-top-left { justify-content: flex-start; align-items: flex-start; }\n            .pos-top-right { justify-content: flex-end; align-items: flex-start; }\n            .pos-bottom-left { justify-content: flex-start; align-items: flex-end; }\n            .pos-bottom-right { justify-content: flex-end; align-items: flex-end; }\n\n            /* FX */\n            .fx-bokeh img {\n                filter: blur(3px);\n            }\n\n            @keyframes pan-left {\n                0% { transform: scale(1.2) translateX(0); }\n                100% { transform: scale(1.2) translateX(-10%); }\n            }\n\n            @keyframes pan-right {\n                0% { transform: scale(1.2) translateX(0); }\n                100% { transform: scale(1.2) translateX(10%); }\n            }\n\n            @keyframes zoom-in {\n                0% { transform: scale(1); }\n                100% { transform: scale(1.2); }\n            }\n\n            @keyframes zoom-out {\n                0% { transform: scale(1.2); }\n                100% { transform: scale(1); }\n            }\n\n            .fx-pan-left img {\n                animation: pan-left 10s linear infinite alternate;\n            }\n\n            .fx-pan-right img {\n                animation: pan-right 10s linear infinite alternate;\n            }\n\n            .fx-zoom-in img {\n                animation: zoom-in 10s linear infinite alternate;\n            }\n\n            .fx-zoom-out img {\n                animation: zoom-out 10s linear infinite alternate;\n            }\n        `;\n\n\t\tthis.container = document.createElement( 'div' );\n\t\tthis.container.classList.add( 'container' );\n\n\t\tthis.img = document.createElement( 'img' );\n\n\t\tthis.container.appendChild( this.img );\n\t\tthis.shadowRoot!.appendChild( style );\n\t\tthis.shadowRoot!.appendChild( this.container );\n\n\t\t// Add hover listeners\n\t\tthis.addEventListener( 'mouseenter', this._handleMouseEnter.bind( this ) );\n\t\tthis.addEventListener( 'mouseleave', this._handleMouseLeave.bind( this ) );\n\t}\n\n\tprivate _handleMouseEnter () {\n\t\tif ( this._fxHover !== 'none' ) {\n\t\t\tthis._isHovering = true;\n\t\t\tthis.updateClasses();\n\t\t}\n\t}\n\n\tprivate _handleMouseLeave () {\n\t\tif ( this._fxHover !== 'none' ) {\n\t\t\tthis._isHovering = false;\n\t\t\tthis.updateClasses();\n\t\t}\n\t}\n\n\tstatic get observedAttributes () {\n\t\treturn [ 'src', 'width', 'height', 'mode', 'position', 'fx', 'fx-hover', 'alt' ];\n\t}\n\n\tattributeChangedCallback ( name: string, oldValue: string, newValue: string ) {\n\t\tif ( oldValue === newValue ) return;\n\n\t\tswitch ( name ) {\n\t\t\tcase 'src':\n\t\t\t\tthis._src = newValue || '';\n\t\t\t\tthis.render();\n\t\t\t\tbreak;\n\t\t\tcase 'width':\n\t\t\t\tthis._width = newValue || '100%';\n\t\t\t\tthis.updateDimensions();\n\t\t\t\tbreak;\n\t\t\tcase 'height':\n\t\t\t\tthis._height = newValue || 'auto';\n\t\t\t\tthis.updateDimensions();\n\t\t\t\tbreak;\n\t\t\tcase 'mode':\n\t\t\t\tthis._mode = ( newValue as ImageMode ) || 'cover';\n\t\t\t\tthis.updateClasses();\n\t\t\t\tbreak;\n\t\t\tcase 'position':\n\t\t\t\tthis._position = ( newValue as ImagePosition ) || 'center';\n\t\t\t\tthis.updateClasses();\n\t\t\t\tbreak;\n\t\t\tcase 'fx':\n\t\t\t\tthis._fx = ( newValue as ImageFX ) || 'none';\n\t\t\t\tthis.updateClasses();\n\t\t\t\tbreak;\n\t\t\tcase 'fx-hover':\n\t\t\t\tthis._fxHover = ( newValue as ImageFX ) || 'none';\n\t\t\t\tthis.updateClasses();\n\t\t\t\tbreak;\n\t\t\tcase 'alt':\n\t\t\t\tthis._alt = newValue || '';\n\t\t\t\tthis.render();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconnectedCallback () {\n\t\tthis.updateDimensions();\n\t\tthis.updateClasses();\n\t\tthis.render();\n\t}\n\n\tprivate updateDimensions () {\n\t\tthis.style.width = this._width;\n\t\tthis.style.height = this._height;\n\t}\n\n\tprivate updateClasses () {\n\t\t// Reset classes\n\t\tthis.container.className = 'container';\n\n\t\t// Add mode class\n\t\tthis.container.classList.add( `mode-${ this._mode }` );\n\n\t\t// Add position class\n\t\tthis.container.classList.add( `pos-${ this._position }` );\n\n\t\t// Add FX class - use hover fx if hovering and defined, otherwise use regular fx\n\t\tconst activeFx = ( this._isHovering && this._fxHover !== 'none' ) ? this._fxHover : this._fx;\n\t\tthis.container.classList.add( `fx-${ activeFx }` );\n\t}\n\n\tprivate render () {\n\t\tconst currentSrc = this.img.getAttribute( 'src' );\n\t\tif ( currentSrc !== this._src ) {\n\t\t\tif ( this._src ) {\n\t\t\t\tthis.img.setAttribute( 'src', this._src );\n\t\t\t} else {\n\t\t\t\tthis.img.removeAttribute( 'src' );\n\t\t\t}\n\t\t}\n\n\t\tconst currentAlt = this.img.getAttribute( 'alt' );\n\t\tif ( currentAlt !== this._alt ) {\n\t\t\tif ( this._alt ) {\n\t\t\t\tthis.img.setAttribute( 'alt', this._alt );\n\t\t\t} else {\n\t\t\t\tthis.img.removeAttribute( 'alt' );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Public API\n\tget src (): string { return this._src; }\n\tset src ( value: string ) { this.setAttribute( 'src', value ); }\n\n\tget width (): string { return this._width; }\n\tset width ( value: string ) { this.setAttribute( 'width', value ); }\n\n\tget height (): string { return this._height; }\n\tset height ( value: string ) { this.setAttribute( 'height', value ); }\n\n\tget mode (): ImageMode { return this._mode; }\n\tset mode ( value: ImageMode ) { this.setAttribute( 'mode', value ); }\n\n\tget position (): ImagePosition { return this._position; }\n\tset position ( value: ImagePosition ) { this.setAttribute( 'position', value ); }\n\n\tget fx (): ImageFX { return this._fx; }\n\tset fx ( value: ImageFX ) { this.setAttribute( 'fx', value ); }\n\n\tget fxHover (): ImageFX { return this._fxHover; }\n\tset fxHover ( value: ImageFX ) { this.setAttribute( 'fx-hover', value ); }\n\n\tget alt (): string { return this._alt; }\n\tset alt ( value: string ) { this.setAttribute( 'alt', value ); }\n}\n\ncustomElements.define( 'liwe3-image-view', ImageView );\n"],"names":["ImageView","style","name","oldValue","newValue","activeFx","value"],"mappings":"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"}