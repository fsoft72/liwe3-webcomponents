{"version":3,"file":"ChunkUploader.js","sources":["../src/ChunkUploader.ts"],"sourcesContent":["/**\n * ChunkUploader Web Component\n * A file uploader with drag & drop, file previews, and chunked upload support\n */\n\nexport interface UploadedFile {\n\tid : string;\n\tfile : File;\n\tstatus : 'pending' | 'uploading' | 'completed' | 'error' | 'aborted';\n\tprogress : number;\n\tuploadedBytes : number;\n\tpreview? : string;\n\terror? : string;\n\tuploadId? : string; // R2 upload ID for aborting\n\tkey? : string; // R2 key for aborting\n}\n\nexport interface ChunkUploaderConfig {\n\tserverURL : string;\n\tchunkSize : number; // in MB\n\tauthToken? : string;\n\tvalidFiletypes? : string[]; // Array of extensions like ['jpg', 'png', 'pdf']\n\tmaxFileSize? : number; // in MB\n\tlabelDropFiles? : string; // Custom text for drop zone (default: \"Drop files here\")\n\tlabelBrowse? : string; // Custom label for browse button (default: \"Browse Files\")\n\tfolder? : string; // Destination folder name for uploads\n\tcompact? : boolean; // Compact mode (single file, no preview)\n\tonfilecomplete? : ( file : UploadedFile ) => void;\n\tonuploadcomplete? : ( files : UploadedFile[] ) => void;\n\tparseResponse? : ( response : any, endpoint : 'initiate' | 'part' | 'complete' ) => any; // Transform endpoint responses\n}\n\nconst DEFAULT_CHUNK_SIZE = 5; // 5MB - R2/S3 minimum part size (except last part)\nconst DEFAULT_MAX_FILE_SIZE = 5120; // 5GB in MB\n\nexport class ChunkUploaderElement extends HTMLElement {\n\tdeclare shadowRoot : ShadowRoot;\n\tprivate files : Map<string, UploadedFile> = new Map();\n\tprivate config : ChunkUploaderConfig = {\n\t\tserverURL: '',\n\t\tchunkSize: DEFAULT_CHUNK_SIZE,\n\t\tmaxFileSize: DEFAULT_MAX_FILE_SIZE,\n\t};\n\tprivate isUploading = false;\n\tprivate abortController : AbortController | null = null;\n\n\tconstructor () {\n\t\tsuper();\n\t\tthis.attachShadow( { mode: 'open' } );\n\t\tthis.render();\n\t\tthis.bindEvents();\n\t}\n\n\tstatic get observedAttributes () : string[] {\n\t\treturn [ 'server-url', 'chunk-size', 'auth-token', 'valid-filetypes', 'max-file-size', 'label-drop-files', 'label-browse', 'folder', 'compact' ];\n\t}\n\n\tattributeChangedCallback ( name : string, oldValue : string | null, newValue : string | null ) : void {\n\t\tif ( oldValue !== newValue ) {\n\t\t\tswitch ( name ) {\n\t\t\t\tcase 'server-url':\n\t\t\t\t\tthis.config.serverURL = newValue || '';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'chunk-size':\n\t\t\t\t\tthis.config.chunkSize = parseFloat( newValue || String( DEFAULT_CHUNK_SIZE ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'auth-token':\n\t\t\t\t\tthis.config.authToken = newValue || undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'valid-filetypes':\n\t\t\t\t\tthis.config.validFiletypes = newValue ? newValue.split( ',' ).map( ( ext ) => ext.trim() ) : undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'max-file-size':\n\t\t\t\t\tthis.config.maxFileSize = parseFloat( newValue || String( DEFAULT_MAX_FILE_SIZE ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'label-drop-files':\n\t\t\t\t\tthis.config.labelDropFiles = newValue || undefined;\n\t\t\t\t\tthis.updateLabels();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'label-browse':\n\t\t\t\t\tthis.config.labelBrowse = newValue || undefined;\n\t\t\t\t\tthis.updateLabels();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'folder':\n\t\t\t\t\tthis.config.folder = newValue || undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'compact':\n\t\t\t\t\tthis.config.compact = newValue !== null;\n\t\t\t\t\tthis.updateCompactMode();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Property getters and setters\n\tget serverURL () : string {\n\t\treturn this.config.serverURL;\n\t}\n\n\tset serverURL ( value : string ) {\n\t\tthis.config.serverURL = value;\n\t\tthis.setAttribute( 'server-url', value );\n\t}\n\n\tget chunkSize () : number {\n\t\treturn this.config.chunkSize;\n\t}\n\n\tset chunkSize ( value : number ) {\n\t\tthis.config.chunkSize = value;\n\t\tthis.setAttribute( 'chunk-size', value.toString() );\n\t}\n\n\tget authToken () : string | undefined {\n\t\treturn this.config.authToken;\n\t}\n\n\tset authToken ( value : string | undefined ) {\n\t\tif ( value ) {\n\t\t\tthis.config.authToken = value;\n\t\t\tthis.setAttribute( 'auth-token', value );\n\t\t} else {\n\t\t\tthis.config.authToken = undefined;\n\t\t\tthis.removeAttribute( 'auth-token' );\n\t\t}\n\t}\n\n\tget validFiletypes () : string[] | undefined {\n\t\treturn this.config.validFiletypes;\n\t}\n\n\tset validFiletypes ( value : string[] | undefined ) {\n\t\tthis.config.validFiletypes = value;\n\t\tif ( value ) {\n\t\t\tthis.setAttribute( 'valid-filetypes', value.join( ',' ) );\n\t\t} else {\n\t\t\tthis.removeAttribute( 'valid-filetypes' );\n\t\t}\n\t}\n\n\tget maxFileSize () : number {\n\t\treturn this.config.maxFileSize || DEFAULT_MAX_FILE_SIZE;\n\t}\n\n\tset maxFileSize ( value : number ) {\n\t\tthis.config.maxFileSize = value;\n\t\tthis.setAttribute( 'max-file-size', value.toString() );\n\t}\n\n\tget labelDropFiles () : string | undefined {\n\t\treturn this.config.labelDropFiles;\n\t}\n\n\tset labelDropFiles ( value : string | undefined ) {\n\t\tthis.config.labelDropFiles = value;\n\t\tif ( value ) {\n\t\t\tthis.setAttribute( 'label-drop-files', value );\n\t\t} else {\n\t\t\tthis.removeAttribute( 'label-drop-files' );\n\t\t}\n\t\tthis.updateLabels();\n\t}\n\n\tget labelBrowse () : string | undefined {\n\t\treturn this.config.labelBrowse;\n\t}\n\n\tset labelBrowse ( value : string | undefined ) {\n\t\tthis.config.labelBrowse = value;\n\t\tif ( value ) {\n\t\t\tthis.setAttribute( 'label-browse', value );\n\t\t} else {\n\t\t\tthis.removeAttribute( 'label-browse' );\n\t\t}\n\t\tthis.updateLabels();\n\t}\n\n\tget folder () : string | undefined {\n\t\treturn this.config.folder;\n\t}\n\n\tset folder ( value : string | undefined ) {\n\t\tthis.config.folder = value;\n\t\tif ( value ) {\n\t\t\tthis.setAttribute( 'folder', value );\n\t\t} else {\n\t\t\tthis.removeAttribute( 'folder' );\n\t\t}\n\t}\n\n\tget compact () : boolean {\n\t\treturn !!this.config.compact;\n\t}\n\n\tset compact ( value : boolean ) {\n\t\tthis.config.compact = value;\n\t\tif ( value ) {\n\t\t\tthis.setAttribute( 'compact', '' );\n\t\t} else {\n\t\t\tthis.removeAttribute( 'compact' );\n\t\t}\n\t\tthis.updateCompactMode();\n\t}\n\n\tset onfilecomplete ( callback : (( file : UploadedFile ) => void) | undefined ) {\n\t\tthis.config.onfilecomplete = callback;\n\t}\n\n\tset onuploadcomplete ( callback : (( files : UploadedFile[] ) => void) | undefined ) {\n\t\tthis.config.onuploadcomplete = callback;\n\t}\n\n\tset parseResponse ( callback : (( response : any, endpoint : 'initiate' | 'part' | 'complete' ) => any) | undefined ) {\n\t\tthis.config.parseResponse = callback;\n\t}\n\n\t/**\n\t * Updates labels in the DOM when properties change\n\t */\n\tprivate updateLabels () : void {\n\t\tconst dropText = this.shadowRoot.querySelector( '.upload-text' );\n\t\tconst browseBtn = this.shadowRoot.querySelector( '#browseBtn' );\n\n\t\tif ( dropText ) {\n\t\t\tdropText.textContent = this.config.labelDropFiles || 'Drop files here';\n\t\t}\n\t\tif ( browseBtn ) {\n\t\t\tbrowseBtn.textContent = this.config.labelBrowse || 'Browse Files';\n\t\t}\n\t}\n\n\t/**\n\t * Updates compact mode styles and attributes\n\t */\n\tprivate updateCompactMode () : void {\n\t\tconst container = this.shadowRoot.querySelector( '.container' );\n\t\tconst fileInput = this.shadowRoot.querySelector( '#fileInput' ) as HTMLInputElement;\n\n\t\tif ( this.config.compact ) {\n\t\t\tcontainer?.classList.add( 'compact' );\n\t\t\tfileInput?.removeAttribute( 'multiple' );\n\t\t} else {\n\t\t\tcontainer?.classList.remove( 'compact' );\n\t\t\tfileInput?.setAttribute( 'multiple', '' );\n\t\t}\n\t}\n\n\t/**\n\t * Formats bytes to human readable string\n\t */\n\tprivate formatBytes ( bytes : number ) : string {\n\t\tif ( bytes === 0 ) return '0 Bytes';\n\t\tconst k = 1024;\n\t\tconst sizes = [ 'Bytes', 'KB', 'MB', 'GB' ];\n\t\tconst i = Math.floor( Math.log( bytes ) / Math.log( k ) );\n\t\treturn Math.round( ( bytes / Math.pow( k, i ) ) * 100 ) / 100 + ' ' + sizes[i];\n\t}\n\n\t/**\n\t * Generates a unique ID for a file\n\t */\n\tprivate generateFileId () : string {\n\t\treturn `file-${Date.now()}-${Math.random().toString( 36 ).substr( 2, 9 )}`;\n\t}\n\n\t/**\n\t * Validates a file based on config\n\t */\n\tprivate validateFile ( file : File ) : { valid : boolean; error? : string } {\n\t\t// Check file size\n\t\tconst maxSizeBytes = this.maxFileSize * 1024 * 1024;\n\t\tif ( file.size > maxSizeBytes ) {\n\t\t\treturn {\n\t\t\t\tvalid: false,\n\t\t\t\terror: `File size exceeds maximum of ${this.formatBytes( maxSizeBytes )}`,\n\t\t\t};\n\t\t}\n\n\t\t// Check file type\n\t\tif ( this.config.validFiletypes && this.config.validFiletypes.length > 0 ) {\n\t\t\tconst extension = file.name.split( '.' ).pop()?.toLowerCase();\n\t\t\tif ( !extension || !this.config.validFiletypes.includes( extension ) ) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\terror: `File type .${extension} is not allowed. Valid types: ${this.config.validFiletypes.join( ', ' )}`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn { valid: true };\n\t}\n\n\t/**\n\t * Generates a preview for image files\n\t */\n\tprivate async generatePreview ( file : File ) : Promise<string | undefined> {\n\t\tif ( !file.type.startsWith( 'image/' ) ) return undefined;\n\n\t\treturn new Promise( ( resolve ) => {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = ( e ) => resolve( e.target?.result as string );\n\t\t\treader.onerror = () => resolve( undefined );\n\t\t\treader.readAsDataURL( file );\n\t\t} );\n\t}\n\n\t/**\n\t * Adds files to the upload queue\n\t */\n\tprivate async addFiles ( fileList : FileList ) : Promise<void> {\n\t\tif ( this.config.compact ) {\n\t\t\tthis.files.clear();\n\t\t}\n\n\t\tconst files = Array.from( fileList );\n\t\tconst filesToProcess = this.config.compact ? [ files[0] ] : files;\n\n\t\tfor ( const file of filesToProcess ) {\n\t\t\tif ( !file ) continue;\n\t\t\tconst validation = this.validateFile( file );\n\n\t\t\tconst id = this.generateFileId();\n\t\t\tconst uploadedFile : UploadedFile = {\n\t\t\t\tid,\n\t\t\t\tfile,\n\t\t\t\tstatus: validation.valid ? 'pending' : 'error',\n\t\t\t\tprogress: 0,\n\t\t\t\tuploadedBytes: 0,\n\t\t\t\terror: validation.error,\n\t\t\t};\n\n\t\t\t// Generate preview for images\n\t\t\tif ( validation.valid && file.type.startsWith( 'image/' ) ) {\n\t\t\t\tuploadedFile.preview = await this.generatePreview( file );\n\t\t\t}\n\n\t\t\tthis.files.set( id, uploadedFile );\n\t\t}\n\n\t\tthis.renderFileCards();\n\t}\n\n\t/**\n\t * Removes a file from the queue\n\t */\n\tprivate removeFile ( id : string ) : void {\n\t\tthis.files.delete( id );\n\t\tthis.renderFileCards();\n\t}\n\n\t/**\n\t * Uploads a single file with chunking\n\t */\n\tprivate async uploadFile ( uploadedFile : UploadedFile ) : Promise<void> {\n\t\tif ( !this.config.serverURL ) {\n\t\t\tthrow new Error( 'Server URL is not configured' );\n\t\t}\n\n\t\t// Remove trailing slash from serverURL if present\n\t\tconst serverUrl = this.config.serverURL.replace( /\\/$/, '' );\n\n\t\tconst { file } = uploadedFile;\n\t\tuploadedFile.status = 'uploading';\n\t\tuploadedFile.progress = 0;\n\t\tthis.updateFileCard( uploadedFile.id );\n\n\t\ttry {\n\t\t\tconst headers : HeadersInit = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t};\n\n\t\t\tif ( this.config.authToken ) {\n\t\t\t\theaders['Authorization'] = `Bearer ${this.config.authToken}`;\n\t\t\t}\n\n\t\t\t// Step 1: Initiate multipart upload\n\t\t\tconst initResponse = await fetch( `${serverUrl}/api/upload/initiate`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tmode: 'cors',\n\t\t\t\theaders,\n\t\t\t\tbody: JSON.stringify( {\n\t\t\t\t\tfileName: file.name,\n\t\t\t\t\tfileType: file.type,\n\t\t\t\t\tfolder: this.config.folder,\n\t\t\t\t} ),\n\t\t\t\tsignal: this.abortController?.signal,\n\t\t\t} );\n\n\t\t\tif ( !initResponse.ok ) {\n\t\t\t\tthrow new Error( `Failed to initiate upload: ${await initResponse.text()}` );\n\t\t\t}\n\n\t\t\tlet initData = await initResponse.json();\n\t\t\tif ( this.config.parseResponse ) {\n\t\t\t\tinitData = this.config.parseResponse( initData, 'initiate' );\n\t\t\t}\n\t\t\tconst { uploadId, key } = initData;\n\n\t\t\t// Store upload metadata for potential abort\n\t\t\tuploadedFile.uploadId = uploadId;\n\t\t\tuploadedFile.key = key;\n\n\t\t\t// Step 2: Upload chunks\n\t\t\tconst chunkSizeBytes = this.config.chunkSize * 1024 * 1024;\n\t\t\tconst totalParts = Math.ceil( file.size / chunkSizeBytes );\n\t\t\tconst parts : Array<{ partNumber : number; etag : string }> = [];\n\n\t\t\tfor ( let partNumber = 1; partNumber <= totalParts; partNumber++ ) {\n\t\t\t\t// Check if upload was aborted\n\t\t\t\tif ( this.abortController?.signal.aborted ) {\n\t\t\t\t\tthrow new Error( 'Upload aborted by user' );\n\t\t\t\t}\n\n\t\t\t\tconst start = ( partNumber - 1 ) * chunkSizeBytes;\n\t\t\t\tconst end = Math.min( start + chunkSizeBytes, file.size );\n\t\t\t\tconst chunk = file.slice( start, end );\n\n\t\t\t\t// Create headers for this part upload\n\t\t\t\tconst partHeaders : HeadersInit = {\n\t\t\t\t\t'Content-Type': 'application/octet-stream',\n\t\t\t\t\t'X-Upload-Id': uploadId,\n\t\t\t\t\t'X-Key': key,\n\t\t\t\t\t'X-Part-Number': partNumber.toString(),\n\t\t\t\t};\n\n\t\t\t\tif ( this.config.authToken ) {\n\t\t\t\t\tpartHeaders['Authorization'] = `Bearer ${this.config.authToken}`;\n\t\t\t\t}\n\n\t\t\t\tconst partResponse = await fetch( `${serverUrl}/api/upload/part`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tmode: 'cors',\n\t\t\t\t\theaders: partHeaders,\n\t\t\t\t\tbody: chunk,\n\t\t\t\t\tsignal: this.abortController?.signal,\n\t\t\t\t} );\n\n\t\t\t\tif ( !partResponse.ok ) {\n\t\t\t\t\tthrow new Error( `Failed to upload part ${partNumber}` );\n\t\t\t\t}\n\n\t\t\t\tlet partData = await partResponse.json();\n\t\t\t\tif ( this.config.parseResponse ) {\n\t\t\t\t\tpartData = this.config.parseResponse( partData, 'part' );\n\t\t\t\t}\n\t\t\t\tconst { etag } = partData;\n\t\t\t\tparts.push( { partNumber, etag } );\n\n\t\t\t\t// Update progress\n\t\t\t\tuploadedFile.uploadedBytes = end;\n\t\t\t\tuploadedFile.progress = ( uploadedFile.uploadedBytes / file.size ) * 100;\n\t\t\t\tthis.updateFileCard( uploadedFile.id );\n\t\t\t}\n\n\t\t\t// Step 3: Complete multipart upload\n\t\t\tconst completeResponse = await fetch( `${serverUrl}/api/upload/complete`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tmode: 'cors',\n\t\t\t\theaders,\n\t\t\t\tbody: JSON.stringify( {\n\t\t\t\t\tuploadId,\n\t\t\t\t\tkey,\n\t\t\t\t\tparts,\n\t\t\t\t} ),\n\t\t\t\tsignal: this.abortController?.signal,\n\t\t\t} );\n\n\t\t\tif ( !completeResponse.ok ) {\n\t\t\t\tthrow new Error( 'Failed to complete upload' );\n\t\t\t}\n\n\t\t\tlet completeData = await completeResponse.json();\n\t\t\tif ( this.config.parseResponse ) {\n\t\t\t\tcompleteData = this.config.parseResponse( completeData, 'complete' );\n\t\t\t}\n\n\t\t\tuploadedFile.status = 'completed';\n\t\t\tuploadedFile.progress = 100;\n\t\t\tthis.updateFileCard( uploadedFile.id );\n\n\t\t\t// Dispatch file complete event\n\t\t\tthis.dispatchEvent(\n\t\t\t\tnew CustomEvent( 'filecomplete', {\n\t\t\t\t\tdetail: uploadedFile,\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcomposed: true,\n\t\t\t\t} ),\n\t\t\t);\n\n\t\t\t// Call callback if provided\n\t\t\tif ( this.config.onfilecomplete ) {\n\t\t\t\tthis.config.onfilecomplete( uploadedFile );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\t// Check if this is an abort error (from AbortController)\n\t\t\tconst isAbortError = error instanceof Error\n\t\t\t\t&& ( error.name === 'AbortError' || error.message === 'Upload aborted by user' );\n\n\t\t\t// Only set error status if not aborted\n\t\t\tif ( !isAbortError ) {\n\t\t\t\tuploadedFile.status = 'error';\n\t\t\t\tuploadedFile.error = error instanceof Error ? error.message : 'Unknown error';\n\t\t\t\tthis.updateFileCard( uploadedFile.id );\n\t\t\t}\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t/**\n\t * Starts uploading all pending files\n\t */\n\tprivate async startUpload () : Promise<void> {\n\t\tif ( this.isUploading ) return;\n\n\t\tconst pendingFiles = Array.from( this.files.values() ).filter( ( f ) => f.status === 'pending' );\n\t\tif ( pendingFiles.length === 0 ) return;\n\n\t\tthis.isUploading = true;\n\t\tthis.abortController = new AbortController();\n\n\t\tconst uploadBtn = this.shadowRoot.querySelector( '#uploadBtn' ) as HTMLButtonElement;\n\t\tconst abortBtn = this.shadowRoot.querySelector( '#abortBtn' ) as HTMLButtonElement;\n\n\t\tif ( uploadBtn ) {\n\t\t\tuploadBtn.disabled = true;\n\t\t\tuploadBtn.textContent = 'Uploading...';\n\t\t}\n\n\t\tif ( abortBtn ) {\n\t\t\tabortBtn.style.display = 'inline-block';\n\t\t}\n\n\t\ttry {\n\t\t\tfor ( const file of pendingFiles ) {\n\t\t\t\t// Check if upload was aborted\n\t\t\t\tif ( this.abortController.signal.aborted ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tawait this.uploadFile( file );\n\t\t\t}\n\n\t\t\t// All uploads complete\n\t\t\tthis.dispatchEvent(\n\t\t\t\tnew CustomEvent( 'uploadcomplete', {\n\t\t\t\t\tdetail: Array.from( this.files.values() ),\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcomposed: true,\n\t\t\t\t} ),\n\t\t\t);\n\n\t\t\t// Call callback if provided\n\t\t\tif ( this.config.onuploadcomplete ) {\n\t\t\t\tthis.config.onuploadcomplete( Array.from( this.files.values() ) );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\t// Only log non-abort errors\n\t\t\tif ( error instanceof Error && error.message !== 'Upload aborted by user' ) {\n\t\t\t\tconsole.error( 'Upload error:', error );\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.isUploading = false;\n\t\t\tif ( uploadBtn ) {\n\t\t\t\tuploadBtn.disabled = false;\n\t\t\t\tuploadBtn.textContent = 'Upload Files';\n\t\t\t}\n\t\t\tif ( abortBtn ) {\n\t\t\t\tabortBtn.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Aborts all pending and uploading files\n\t */\n\tprivate async abortAllUploads () : Promise<void> {\n\t\t// Trigger abort signal to stop ongoing fetch requests\n\t\tif ( this.abortController ) {\n\t\t\tthis.abortController.abort();\n\t\t}\n\n\t\tconst filesToAbort = Array.from( this.files.values() ).filter(\n\t\t\t( f ) => f.status === 'pending' || f.status === 'uploading',\n\t\t);\n\n\t\tif ( filesToAbort.length === 0 ) return;\n\n\t\tconst headers : HeadersInit = {\n\t\t\t'Content-Type': 'application/json',\n\t\t};\n\n\t\tif ( this.config.authToken ) {\n\t\t\theaders['Authorization'] = `Bearer ${this.config.authToken}`;\n\t\t}\n\n\t\tfor ( const file of filesToAbort ) {\n\t\t\t// If upload was initiated, abort it on the server\n\t\t\tif ( file.uploadId && file.key ) {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove trailing slash from serverURL if present\n\t\t\t\t\tconst serverUrl = this.config.serverURL.replace( /\\/$/, '' );\n\t\t\t\t\tawait fetch( `${serverUrl}/api/upload/abort`, {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tmode: 'cors',\n\t\t\t\t\t\theaders,\n\t\t\t\t\t\tbody: JSON.stringify( {\n\t\t\t\t\t\t\tuploadId: file.uploadId,\n\t\t\t\t\t\t\tkey: file.key,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t} );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( `Failed to abort upload for ${file.file.name}:`, error );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update file status\n\t\t\tfile.status = 'aborted';\n\t\t\tfile.error = 'Upload aborted by user';\n\t\t\tthis.updateFileCard( file.id );\n\t\t}\n\n\t\t// Dispatch abort event\n\t\tthis.dispatchEvent(\n\t\t\tnew CustomEvent( 'uploadaborted', {\n\t\t\t\tdetail: filesToAbort,\n\t\t\t\tbubbles: true,\n\t\t\t\tcomposed: true,\n\t\t\t} ),\n\t\t);\n\n\t\t// Reset upload state\n\t\tthis.isUploading = false;\n\t\tconst uploadBtn = this.shadowRoot.querySelector( '#uploadBtn' ) as HTMLButtonElement;\n\t\tconst abortBtn = this.shadowRoot.querySelector( '#abortBtn' ) as HTMLButtonElement;\n\n\t\tif ( uploadBtn ) {\n\t\t\tuploadBtn.disabled = false;\n\t\t\tuploadBtn.textContent = 'Upload Files';\n\t\t}\n\n\t\tif ( abortBtn ) {\n\t\t\tabortBtn.style.display = 'none';\n\t\t}\n\t}\n\n\t/**\n\t * Updates a single file card in the DOM\n\t */\n\tprivate updateFileCard ( fileId : string ) : void {\n\t\tconst file = this.files.get( fileId );\n\t\tif ( !file ) return;\n\n\t\tconst card = this.shadowRoot.querySelector( `[data-file-id=\"${fileId}\"]` ) as HTMLElement;\n\t\tif ( !card ) return;\n\n\t\tconst progressBar = card.querySelector( '.progress-bar' ) as HTMLElement;\n\t\tconst progressText = card.querySelector( '.progress-text' ) as HTMLElement;\n\t\tconst statusDiv = card.querySelector( '.status' ) as HTMLElement;\n\n\t\tif ( progressBar ) {\n\t\t\tprogressBar.style.width = `${file.progress}%`;\n\n\t\t\t// Color based on status\n\t\t\tif ( file.status === 'completed' ) {\n\t\t\t\tprogressBar.style.backgroundColor = '#22c55e'; // green\n\t\t\t} else if ( file.status === 'error' ) {\n\t\t\t\tprogressBar.style.backgroundColor = '#ef4444'; // red\n\t\t\t} else if ( file.status === 'aborted' ) {\n\t\t\t\tprogressBar.style.backgroundColor = '#f59e0b'; // orange\n\t\t\t} else {\n\t\t\t\tprogressBar.style.backgroundColor = 'var(--color-primary)';\n\t\t\t}\n\t\t}\n\n\t\tif ( progressText ) {\n\t\t\tprogressText.textContent = `${Math.round( file.progress )}%`;\n\t\t}\n\n\t\tif ( statusDiv && file.error ) {\n\t\t\tstatusDiv.textContent = file.error;\n\t\t\tstatusDiv.style.display = 'block';\n\t\t}\n\t}\n\n\t/**\n\t * Renders all file cards\n\t */\n\tprivate renderFileCards () : void {\n\t\tconst container = this.shadowRoot.querySelector( '#fileCardsContainer' );\n\t\tif ( !container ) return;\n\n\t\tif ( this.files.size === 0 ) {\n\t\t\tcontainer.innerHTML = '';\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.innerHTML = Array.from( this.files.values() ).map( ( file ) => `\n      <div class=\"file-card\" data-file-id=\"${file.id}\">\n        <button class=\"remove-btn\" data-file-id=\"${file.id}\">√ó</button>\n        ${file.preview ? `<div class=\"preview\"><img src=\"${file.preview}\" alt=\"Preview\"></div>` : '<div class=\"preview no-preview\">üìÑ</div>'}\n        <div class=\"file-info\">\n          <div class=\"file-name\" title=\"${file.file.name}\">${file.file.name}</div>\n          <div class=\"file-size\">${this.formatBytes( file.file.size )}</div>\n        </div>\n        <div class=\"progress-container\">\n          <div class=\"progress-bar-bg\">\n            <div class=\"progress-bar\" style=\"width: ${file.progress}%; background-color: ${\n\t\t\tfile.status === 'completed' ? '#22c55e' : file.status === 'error' ? '#ef4444' : 'var(--color-primary)'\n\t\t}\"></div>\n          </div>\n          <div class=\"progress-text\">${Math.round( file.progress )}%</div>\n        </div>\n        ${file.error ? `<div class=\"status error\">${file.error}</div>` : ''}\n      </div>\n    ` ).join( '' );\n\n\t\t// Bind remove button events\n\t\tconst removeButtons = container.querySelectorAll( '.remove-btn' );\n\t\tremoveButtons.forEach( ( btn ) => {\n\t\t\tbtn.addEventListener( 'click', ( e ) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst fileId = ( btn as HTMLElement ).dataset.fileId;\n\t\t\t\tif ( fileId ) this.removeFile( fileId );\n\t\t\t} );\n\t\t} );\n\n\t\t// Show/hide upload button\n\t\tconst uploadBtn = this.shadowRoot.querySelector( '#uploadBtn' ) as HTMLButtonElement;\n\t\tif ( uploadBtn ) {\n\t\t\tconst hasPendingFiles = Array.from( this.files.values() ).some( ( f ) => f.status === 'pending' );\n\t\t\tuploadBtn.style.display = hasPendingFiles ? 'block' : 'none';\n\t\t}\n\t}\n\n\t/**\n\t * Binds event listeners\n\t */\n\tprivate bindEvents () : void {\n\t\tconst uploadZone = this.shadowRoot.querySelector( '#uploadZone' ) as HTMLElement;\n\t\tconst fileInput = this.shadowRoot.querySelector( '#fileInput' ) as HTMLInputElement;\n\t\tconst browseBtn = this.shadowRoot.querySelector( '#browseBtn' ) as HTMLButtonElement;\n\t\tconst uploadBtn = this.shadowRoot.querySelector( '#uploadBtn' ) as HTMLButtonElement;\n\t\tconst abortBtn = this.shadowRoot.querySelector( '#abortBtn' ) as HTMLButtonElement;\n\n\t\t// Click to browse\n\t\tbrowseBtn?.addEventListener( 'click', () => fileInput?.click() );\n\n\t\t// Drag and drop\n\t\tuploadZone?.addEventListener( 'dragover', ( e ) => {\n\t\t\te.preventDefault();\n\t\t\tuploadZone.classList.add( 'drag-over' );\n\t\t} );\n\n\t\tuploadZone?.addEventListener( 'dragleave', () => {\n\t\t\tuploadZone.classList.remove( 'drag-over' );\n\t\t} );\n\n\t\tuploadZone?.addEventListener( 'drop', ( e ) => {\n\t\t\te.preventDefault();\n\t\t\tuploadZone.classList.remove( 'drag-over' );\n\t\t\tif ( e.dataTransfer?.files ) {\n\t\t\t\tthis.addFiles( e.dataTransfer.files );\n\t\t\t}\n\t\t} );\n\n\t\t// File input change\n\t\tfileInput?.addEventListener( 'change', ( e ) => {\n\t\t\tconst files = ( e.target as HTMLInputElement ).files;\n\t\t\tif ( files ) {\n\t\t\t\tthis.addFiles( files );\n\t\t\t\t// Reset input so same file can be added again\n\t\t\t\tfileInput.value = '';\n\t\t\t}\n\t\t} );\n\n\t\t// Upload button\n\t\tuploadBtn?.addEventListener( 'click', () => this.startUpload() );\n\n\t\t// Abort button\n\t\tabortBtn?.addEventListener( 'click', () => this.abortAllUploads() );\n\t}\n\n\t/**\n\t * Renders the component\n\t */\n\tprivate render () : void {\n\t\tthis.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        }\n\n        * {\n          box-sizing: border-box;\n        }\n\n        .container {\n          width: 100%;\n        }\n\n        .upload-zone {\n          border: 2px dashed #ccc;\n          border-radius: 8px;\n          padding: 10px;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          background: #fafafa;\n        }\n\n        .upload-zone:hover {\n          border-color: #4CAF50;\n          background: #f0f9f0;\n        }\n\n        .upload-zone.drag-over {\n          border-color: #4CAF50;\n          background: #e8f5e9;\n        }\n\n        .upload-zone-content {\n          pointer-events: none;\n        }\n\n        .upload-icon {\n          font-size: 48px;\n          margin-bottom: 16px;\n        }\n\n        .upload-text {\n          font-size: 18px;\n          margin-bottom: 8px;\n          color: #333;\n        }\n\n        .upload-hint {\n          font-size: 14px;\n          color: #666;\n        }\n\n        .browse-btn {\n          background: #4CAF50;\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 6px;\n          font-size: 16px;\n          font-weight: 500;\n          cursor: pointer;\n          margin-top: 16px;\n          transition: background 0.3s ease;\n          pointer-events: auto;\n        }\n\n        .browse-btn:hover {\n          background: #45a049;\n        }\n\n        input[type=\"file\"] {\n          display: none;\n        }\n\n        .file-cards-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 16px;\n          margin-top: 24px;\n        }\n\n        .file-card {\n          position: relative;\n          width: 200px;\n          border: 1px solid #e0e0e0;\n          border-radius: 8px;\n          padding: 12px;\n          background: white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          transition: box-shadow 0.3s ease;\n        }\n\n        .file-card:hover {\n          box-shadow: 0 4px 8px rgba(0,0,0,0.15);\n        }\n\n        .remove-btn {\n          position: absolute;\n          top: 8px;\n          right: 8px;\n          width: 24px;\n          height: 24px;\n          border: none;\n          border-radius: 50%;\n          background: rgba(239, 68, 68, 0.9);\n          color: white;\n          font-size: 18px;\n          line-height: 1;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 0;\n          transition: background 0.3s ease;\n          z-index: 1;\n        }\n\n        .remove-btn:hover {\n          background: rgba(239, 68, 68, 1);\n        }\n\n        .preview {\n          width: 100%;\n          height: 120px;\n          border-radius: 4px;\n          overflow: hidden;\n          background: #f5f5f5;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-bottom: 8px;\n        }\n\n        .preview img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .preview.no-preview {\n          font-size: 48px;\n        }\n\n        .file-info {\n          margin-bottom: 8px;\n        }\n\n        .file-name {\n          font-size: 14px;\n          font-weight: 500;\n          color: #333;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          margin-bottom: 4px;\n        }\n\n        .file-size {\n          font-size: 12px;\n          color: #666;\n        }\n\n        .progress-container {\n          margin-top: 8px;\n        }\n\n        .progress-bar-bg {\n          width: 100%;\n          height: 8px;\n          background: #e0e0e0;\n          border-radius: 4px;\n          overflow: hidden;\n          margin-bottom: 4px;\n        }\n\n        .progress-bar {\n          height: 100%;\n          background: var(--color-primary, #4CAF50);\n          transition: width 0.3s ease, background-color 0.3s ease;\n        }\n\n        .progress-text {\n          font-size: 12px;\n          color: #666;\n          text-align: center;\n        }\n\n        .status {\n          font-size: 12px;\n          color: #ef4444;\n          margin-top: 4px;\n          display: none;\n        }\n\n        .status.error {\n          display: block;\n        }\n\n        .upload-btn {\n          background: #4CAF50;\n          color: white;\n          border: none;\n          padding: 12px 32px;\n          border-radius: 6px;\n          font-size: 16px;\n          font-weight: 500;\n          cursor: pointer;\n          margin-top: 24px;\n          transition: background 0.3s ease;\n          display: none;\n        }\n\n        .upload-btn:hover:not(:disabled) {\n          background: #45a049;\n        }\n\n        .upload-btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .abort-btn {\n          background: #ef4444;\n          color: white;\n          border: none;\n          padding: 12px 32px;\n          border-radius: 6px;\n          font-size: 16px;\n          font-weight: 500;\n          cursor: pointer;\n          margin-top: 24px;\n          margin-left: 12px;\n          transition: background 0.3s ease;\n          display: none;\n        }\n\n        .abort-btn:hover {\n          background: #dc2626;\n        }\n\n        .buttons-container {\n          display: flex;\n          align-items: center;\n        }\n\n        /* Compact Mode Styles */\n        .container.compact .upload-zone {\n          padding: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n        }\n\n        .container.compact .upload-icon,\n        .container.compact .upload-hint {\n          display: none;\n        }\n\n        .container.compact .upload-text {\n          font-size: 14px;\n          margin-bottom: 0;\n        }\n\n        .container.compact .browse-btn {\n          margin-top: 0;\n          padding: 6px 12px;\n          font-size: 14px;\n        }\n\n        .container.compact .file-cards-container {\n          margin-top: 12px;\n        }\n\n        .container.compact .file-card {\n          width: 100%;\n          display: flex;\n          align-items: center;\n          padding: 8px;\n          height: auto;\n        }\n\n        .container.compact .preview {\n          display: none !important;\n        }\n\n        .container.compact .file-info {\n          margin-bottom: 0;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          flex: 0 0 auto;\n        }\n\n        .container.compact .file-name {\n          margin-bottom: 0;\n          max-width: 150px;\n        }\n\n        .container.compact .progress-container {\n          margin-top: 0;\n          flex: 1;\n          margin-left: 12px;\n          margin-right: 32px;\n        }\n\n        .container.compact .remove-btn {\n          top: 50%;\n          transform: translateY(-50%);\n        }\n      </style>\n\n      <div class=\"container\">\n        <div class=\"upload-zone\" id=\"uploadZone\">\n          <input type=\"file\" id=\"fileInput\" multiple>\n          <div class=\"upload-zone-content\">\n            <div class=\"upload-icon\">üìÅ</div>\n            <div class=\"upload-text\">${this.config.labelDropFiles || 'Drop files here'}</div>\n            <div class=\"upload-hint\">or</div>\n            <button class=\"browse-btn\" id=\"browseBtn\">${this.config.labelBrowse || 'Browse Files'}</button>\n          </div>\n        </div>\n\n        <div class=\"file-cards-container\" id=\"fileCardsContainer\"></div>\n\n        <div class=\"buttons-container\">\n          <button class=\"upload-btn\" id=\"uploadBtn\">Upload Files</button>\n          <button class=\"abort-btn\" id=\"abortBtn\">Abort Upload</button>\n        </div>\n      </div>\n    `;\n\t}\n}\n\n/**\n * Defines the custom element if not already defined\n */\nexport const defineChunkUploader = ( tagName = 'liwe3-chunk-uploader' ) : void => {\n\tif ( typeof window !== 'undefined' && !customElements.get( tagName ) ) {\n\t\tcustomElements.define( tagName, ChunkUploaderElement );\n\t}\n};\n\n// Auto-register with default tag name\nif ( typeof window !== 'undefined' ) {\n\tdefineChunkUploader();\n}\n"],"names":["ChunkUploaderElement","name","oldValue","newValue","ext","value","callback","dropText","browseBtn","container","fileInput","bytes","k","sizes","i","file","maxSizeBytes","extension","resolve","reader","e","fileList","files","filesToProcess","validation","id","uploadedFile","serverUrl","headers","initResponse","initData","uploadId","key","chunkSizeBytes","totalParts","parts","partNumber","start","end","chunk","partHeaders","partResponse","partData","etag","completeResponse","completeData","error","pendingFiles","f","uploadBtn","abortBtn","filesToAbort","fileId","card","progressBar","progressText","statusDiv","btn","hasPendingFiles","uploadZone","defineChunkUploader","tagName"],"mappings":"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AAA;AAAA,EAKQ,SAAiB;AACxB,SAAK,WAAW,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAgUS,KAAK,OAAO,kBAAkB,iBAAiB;AAAA;AAAA,wDAE9B,KAAK,OAAO,eAAe,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYhG;AACD;AAKO,MAAMU,IAAsB,CAAEC,IAAU,2BAAmC;AACjF,EAAK,OAAO,SAAW,OAAe,CAAC,eAAe,IAAKA,CAAQ,KAClE,eAAe,OAAQA,GAAS7D,CAAqB;AAEvD;AAGK,OAAO,SAAW,OACtB4D,EAAA;"}