{"version":3,"file":"ButtonToolbar.js","sources":["../src/ButtonToolbar.ts"],"sourcesContent":["/**\n * ButtonToolbar Web Component\n * A customizable toolbar with groups of buttons, supporting horizontal/vertical orientation\n */\n\nexport type ButtonToolbarItem = {\n  id: string;\n  label?: string;\n  icon?: string; // SVG content or icon class\n  image?: string; // Image URL\n  type?: 'default' | 'info' | 'error' | 'warn' | 'success';\n  disabled?: boolean;\n  tooltip?: string;\n  action?: string; // Optional action name to dispatch\n};\n\nexport type ButtonToolbarGroup = {\n  id?: string;\n  items: ButtonToolbarItem[];\n  class?: string; // Optional CSS class for the group\n};\n\nexport class ButtonToolbarElement extends HTMLElement {\n  declare shadowRoot: ShadowRoot;\n  private _groups: ButtonToolbarGroup[] = [];\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  static get observedAttributes(): string[] {\n    return ['orientation', 'groups'];\n  }\n\n  attributeChangedCallback(_name: string, oldValue: string | null, newValue: string | null): void {\n    if (oldValue !== newValue) {\n      this.render();\n    }\n  }\n\n  get orientation(): 'horizontal' | 'vertical' {\n    return (this.getAttribute('orientation') as 'horizontal' | 'vertical') || 'horizontal';\n  }\n\n  set orientation(value: 'horizontal' | 'vertical') {\n    this.setAttribute('orientation', value);\n  }\n\n  get groups(): ButtonToolbarGroup[] {\n    const groupsAttr = this.getAttribute('groups');\n    if (groupsAttr) {\n      try {\n        return JSON.parse(groupsAttr);\n      } catch (e) {\n        console.error('Invalid groups format:', e);\n        return [];\n      }\n    }\n    return this._groups;\n  }\n\n  set groups(value: ButtonToolbarGroup[]) {\n    this._groups = value;\n    // Also update attribute for consistency, but be careful with large data\n    // For now, let's just render. If we want to sync property to attribute:\n    // this.setAttribute('groups', JSON.stringify(value));\n    // But usually for complex data, property is preferred source of truth if set directly.\n    \n    // SmartSelect implementation:\n    // set options ( opts: SelectOption[] ) {\n    //   this.setAttribute( 'options', JSON.stringify( opts ) );\n    // }\n    \n    // I'll follow SmartSelect pattern for consistency\n    this.setAttribute('groups', JSON.stringify(value));\n  }\n\n  connectedCallback(): void {\n    this.render();\n  }\n\n  private handleButtonClick(item: ButtonToolbarItem, event: Event): void {\n    if (item.disabled) return;\n    \n    this.dispatchEvent(new CustomEvent('button-click', {\n      detail: {\n        id: item.id,\n        action: item.action || item.id,\n        originalEvent: event,\n        item\n      },\n      bubbles: true,\n      composed: true\n    }));\n  }\n\n  private render(): void {\n    if (!this.shadowRoot) return;\n\n    const style = `\n      :host {\n        display: block;\n        font-family: var(--liwe3-font-family, system-ui, -apple-system, sans-serif);\n      }\n\n      .toolbar {\n        display: flex;\n        gap: var(--liwe3-toolbar-gap, 0.5rem);\n        width: 100%;\n        box-sizing: border-box;\n      }\n\n      .toolbar.horizontal {\n        flex-direction: row;\n        align-items: center;\n      }\n\n      .toolbar.vertical {\n        flex-direction: column;\n        align-items: stretch;\n      }\n\n      .group {\n        display: flex;\n        gap: 1px; /* Gap between buttons in a group */\n        background-color: var(--liwe3-toolbar-group-bg, transparent);\n        border-radius: var(--liwe3-toolbar-radius, 0.375rem);\n        overflow: hidden;\n      }\n\n      .toolbar.horizontal .group {\n        flex-direction: row;\n      }\n\n      .toolbar.vertical .group {\n        flex-direction: column;\n      }\n\n      .button {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        gap: 0.5rem;\n        padding: var(--liwe3-button-padding, 0.5rem 1rem);\n        border: none;\n        cursor: pointer;\n        font-size: var(--liwe3-button-font-size, 0.875rem);\n        line-height: 1.25;\n        transition: all 0.2s;\n        background-color: var(--liwe3-button-bg, #f3f4f6);\n        color: var(--liwe3-button-color, #1f2937);\n        min-height: var(--liwe3-button-height, 2.5rem);\n      }\n\n      .button:hover:not(:disabled) {\n        filter: brightness(0.95);\n      }\n\n      .button:active:not(:disabled) {\n        filter: brightness(0.9);\n      }\n\n      .button:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      /* Button Types */\n      .button.default {\n        background-color: var(--liwe3-button-default-bg, #f3f4f6);\n        color: var(--liwe3-button-default-color, #1f2937);\n      }\n\n      .button.info {\n        background-color: var(--liwe3-button-info-bg, #3b82f6);\n        color: var(--liwe3-button-info-color, #ffffff);\n      }\n\n      .button.error {\n        background-color: var(--liwe3-button-error-bg, #ef4444);\n        color: var(--liwe3-button-error-color, #ffffff);\n      }\n\n      .button.warn {\n        background-color: var(--liwe3-button-warn-bg, #f59e0b);\n        color: var(--liwe3-button-warn-color, #ffffff);\n      }\n      \n      .button.success {\n        background-color: var(--liwe3-button-success-bg, #10b981);\n        color: var(--liwe3-button-success-color, #ffffff);\n      }\n\n      /* Content styling */\n      .icon {\n        width: 1.25em;\n        height: 1.25em;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      .icon svg {\n        width: 100%;\n        height: 100%;\n        fill: currentColor;\n      }\n\n      .image {\n        width: 1.5em;\n        height: 1.5em;\n        object-fit: cover;\n        border-radius: 50%;\n      }\n      \n      /* Group styling - rounded corners logic */\n      .toolbar.horizontal .group .button:first-child {\n        border-top-left-radius: var(--liwe3-toolbar-radius, 0.375rem);\n        border-bottom-left-radius: var(--liwe3-toolbar-radius, 0.375rem);\n      }\n      \n      .toolbar.horizontal .group .button:last-child {\n        border-top-right-radius: var(--liwe3-toolbar-radius, 0.375rem);\n        border-bottom-right-radius: var(--liwe3-toolbar-radius, 0.375rem);\n      }\n      \n      .toolbar.vertical .group .button:first-child {\n        border-top-left-radius: var(--liwe3-toolbar-radius, 0.375rem);\n        border-top-right-radius: var(--liwe3-toolbar-radius, 0.375rem);\n      }\n      \n      .toolbar.vertical .group .button:last-child {\n        border-bottom-left-radius: var(--liwe3-toolbar-radius, 0.375rem);\n        border-bottom-right-radius: var(--liwe3-toolbar-radius, 0.375rem);\n      }\n    `;\n\n    const renderButton = (item: ButtonToolbarItem) => {\n      const btn = document.createElement('button');\n      btn.className = `button ${item.type || 'default'}`;\n      if (item.disabled) btn.disabled = true;\n      if (item.tooltip) btn.title = item.tooltip;\n      \n      btn.onclick = (e) => this.handleButtonClick(item, e);\n\n      if (item.icon) {\n        const iconSpan = document.createElement('span');\n        iconSpan.className = 'icon';\n        // Check if it's an SVG string or just a class name (simple heuristic)\n        if (item.icon.trim().startsWith('<')) {\n          iconSpan.innerHTML = item.icon;\n        } else {\n          // Assuming it might be a class name if not SVG\n          const i = document.createElement('i');\n          i.className = item.icon;\n          iconSpan.appendChild(i);\n        }\n        btn.appendChild(iconSpan);\n      }\n\n      if (item.image) {\n        const img = document.createElement('img');\n        img.src = item.image;\n        img.className = 'image';\n        img.alt = item.label || '';\n        btn.appendChild(img);\n      }\n\n      if (item.label) {\n        const span = document.createElement('span');\n        span.textContent = item.label;\n        btn.appendChild(span);\n      }\n\n      return btn;\n    };\n\n    const container = document.createElement('div');\n    container.className = `toolbar ${this.orientation}`;\n\n    this._groups.forEach(group => {\n      const groupDiv = document.createElement('div');\n      groupDiv.className = `group ${group.class || ''}`;\n      \n      group.items.forEach(item => {\n        groupDiv.appendChild(renderButton(item));\n      });\n      \n      container.appendChild(groupDiv);\n    });\n\n    this.shadowRoot.innerHTML = `<style>${style}</style>`;\n    this.shadowRoot.appendChild(container);\n  }\n}\n\nexport const defineButtonToolbar = (): void => {\n  if (typeof window !== 'undefined' && !customElements.get('liwe3-button-toolbar')) {\n    customElements.define('liwe3-button-toolbar', ButtonToolbarElement);\n  }\n};\n"],"names":["ButtonToolbarElement","_name","oldValue","newValue","value","groupsAttr","e","item","event","style","renderButton","btn","iconSpan","i","img","span","container","group","groupDiv","defineButtonToolbar"],"mappings":"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"}